{% extends 'admin/index.html' %}
{% block title %} Upsert Product {% endblock %}
{% block admin_content %}
    <h5>Update/Insert Product</h5>
    <br>
    <!-- TODO: Implement serverside validation using bootstrap classes -->
    <form method="POST" enctype="multipart/form-data" class="form-register needs-validation" novalidate>
        {{ edit_form.hidden_tag() }}
        <h6>You are about to Update/Insert the following product:</h6>
        <br>
        <div class="form-row">
            <div class="form-group col-md-9">
                {{ edit_form.name.label() }}
                {% if edit_form.name.errors %}
                    {{ edit_form.name(class="form-control is-invalid", placeholder="Product Name", required=True) }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.name.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.name(class="form-control", placeholder="Product Name", required=True) }}
                {% endif %}

            </div>
            <div class="form-group col-md-3">
                {{ edit_form.price.label() }}
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text"><i class="fas fa-dollar-sign"></i></div>
                    </div>
                    {% if edit_form.price.errors %}
                        {{ edit_form.price(class="form-control is-invalid", placeholder="Price", required=True) }}
                        <div class="invalid-feedback">
                            {% for error in edit_form.price.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ edit_form.price(class="form-control", placeholder="Price", required=True) }}
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-4">
                {{ edit_form.brand.label() }}
                {% if edit_form.brand.errors %}
                    {{ edit_form.brand(class="form-control is-invalid", placeholder="Brand Name", required=True) }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.brand.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.brand(class="form-control", placeholder="Brand Name", required=True) }}
                {% endif %}

            </div>
            <div class="form-group col-md-4">
                {{ edit_form.category.label() }}
                {% if edit_form.category.errors %}
                    {{ edit_form.category(class="form-control is-invalid", placeholder="Category", required=True) }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.category.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.category(class="form-control", placeholder="Category", required=True) }}
                {% endif %}
            </div>
            <div class="form-group col-md-4">
                {{ edit_form.quantity.label() }}
                {% if edit_form.quantity.errors %}
                    {{ edit_form.quantity(class="form-control is-invalid", placeholder="Quatity", required=True) }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.quantity.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.quantity(class="form-control", placeholder="Quatity", required=True) }}
                {% endif %}
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-12">
                {{ edit_form.description.label() }}
                {% if edit_form.description.errors %}
                    {{ edit_form.description(class="form-control is-invalid",
                                    placeholder="Product Description", required=True, maxlength=350, rows=5) }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.description.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.description(class="form-control",
                                    placeholder="Product Description", required=True, maxlength=350, rows=5) }}
                {% endif %}
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-12">
                {{ edit_form.product_image_file.label() }}
                {% if edit_form.product_image_file.errors %}
                    {{ edit_form.product_image_file(class="form-control-file is-invalid") }}
                    <div class="invalid-feedback">
                        {% for error in edit_form.product_image_file.errors %}
                            <span>{{ error }}</span>
                        {% endfor %}
                    </div>
                {% else %}
                    {{ edit_form.product_image_file(class="form-control-file") }}
                {% endif %}
            </div>
        </div>
        <br>
        <a class="btn btn-warning" href="{{ url_for('admin.manage_products') }}">Go Back</a>
        {{ edit_form.submit(class="btn btn-success") }}
    </form>
    <br>
{% endblock %}