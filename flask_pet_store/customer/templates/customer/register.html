{% extends 'layout.html' %}

{% block title %} Registration {% endblock %}

{% block content %}
    <div class="container">
        <br>
        <h1>Registration Form</h1>
        <br>
        <!-- TODO: Implement serverside validation using bootstrap classes -->
        <form method="POST" class="form-register needs-validation" novalidate>
            {{ form.hidden_tag() }}
            <div class="form-row">
                <div class="form-group col-md-5">
                    {{ form.first_name.label() }}
                    {{ form.first_name(class="form-control", placeholder="First Name", required=True) }}
                    <div class="invalid-feedback">
                        Please enter first name
                    </div>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="form-group col-md-5">
                    {{ form.last_name.label() }}
                    {{ form.last_name(class="form-control", placeholder="Last Name", required=True) }}
                    <div class="invalid-feedback">
                        Please enter last name
                    </div>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="form-group col-md-2">
                    {{ form.sex.label() }}
                    {{ form.sex(class="form-control") }}
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form.email.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-envelope"></i></div>
                        </div>
                        {{ form.email(class="form-control", placeholder="Email Address", type="email", required=True) }}
                        <div class="invalid-feedback">
                            Please enter a valid email address
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    {{ form.username.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-at"></i></div>
                        </div>
                        {{ form.username(class="form-control", placeholder="Username", required=True, minlength=1, maxlength=60) }}
                        <div class="invalid-feedback">
                            Username must between 1 and 60 characters
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form.password1.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-lock"></i></div>
                        </div>
                        {{ form.password1(class="form-control", placeholder="Password", minlength=6, required=True) }}
                        <div class="invalid-feedback">
                            Password must have more than 6 characters
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-6">
                    {{ form.password2.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-lock"></i></div>
                        </div>
                        {{ form.password2(class="form-control", placeholder="Confirm Password", oninput="checkPass(this)",
                                minlength=6, required=True) }}
                        <div class="invalid-feedback">
                            Passwords do not match
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    {{ form.street_name.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-map-marker-alt"></i></div>
                        </div>
                        {{ form.street_name(class="form-control", placeholder="Street Name", required=True) }}
                        <div class="invalid-feedback">
                            Please enter a street name
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    {{ form.city.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-compass"></i></div>
                        </div>
                        {{ form.city(class="form-control", placeholder="City", required=True) }}
                        <div class="invalid-feedback">
                            Please enter a city name
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-2">
                    {{ form.province.label() }}
                    {{ form.province(class="form-control", placeholder="Province", required=True) }}
                    <div class="invalid-feedback">
                        Please select a province
                    </div>
                    <div class="valid-feedback">
                        Looks good!
                    </div>
                </div>
                <div class="form-group col-md-2">
                    {{ form.zip_code.label() }}
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <div class="input-group-text"><i class="fas fa-envelope-open-text"></i></div>
                        </div>
                        {{ form.zip_code(class="form-control", placeholder="Zip Code",
                        pattern="^[A-Za-z][0-9][A-Za-z][ ]?[0-9][A-Za-z][0-9]$", required=True) }}
                        <div class="invalid-feedback">
                            Please enter a valid zip code
                        </div>
                        <div class="valid-feedback">
                            Looks good!
                        </div>
                    </div>
                </div>
            </div>
            {{ form.submit(class="btn btn-lg btn-info") }}
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        function checkPass(input) {
            let pass1 = document.getElementById("password1");
            if (input.value !== pass1.value) {
                input.setCustomValidity("Passwords do not match");
            } else {
                input.setCustomValidity('');
            }
        }
    </script>
    <script src="{{ url_for('static', filename='js/form_validation.js') }}"></script>
{% endblock %}